[Linux](./Linux.md)

# SSH

`ssh` *[опции] [имя*пользователя*@*]хост [команда]\_ — клиент
Если не указать имя пользователя, будет использовано локальное имя пользователя(имя на текущем компьютере) на удаленном хосте

`sshd` — демон сервера  
`ssh-keygen` — команда для генерации пар открытых-закрытых ключей;  
`ssh-add` и `ssh-agent` — утилиты для управления ключами аутентификации;  
`ssh-keyscan` — для извлечения открытых ключей с серверов;  
`sftp- server` — серверный процесс для передачи файлов через протокол SFТP;  
`sftp` и `scp` — утилиты для передачи файлов.

- Аутентификация с помощью открытого ключа

  1. Создать пару открытый-закрытый ключ
     `ssh-keygen -t ed25519 -C "vahrameev.work@gmail.com"`
  2. Передать свой **открытый** ключ на удаленный сервер, в файл `~/.ssh/authorized_keys`

     - Если вы администратор

       1. Убедитесь, что у пользователя есть активная учетная запись с корректной системной оболочкой.
       2. Получите копию открытого ключа пользователя от самого пользователя .
       3. Создайте пользовательский каталог `~user/.ssh/` с разрешениями 0700.
       4. Добавьте открытый ключ в файл `~user/.ssh/authorized_keys`
          и установите разрешения для этого файла 0600.

       ```bash
       grep user /etc/passwd
       mkdir -р ~user/.ssh && chmod 0700 ~user/.ssh
       cat /tmp/user.pub >> -user/.ssh/authorized_keys
       chmod 0 600 ~user/.ssh/authorized_keys
       ```

  3. Войти на удаленный сервер при помощи **закрытого** ключа
